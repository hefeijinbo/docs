Windows 是典型的`多任务`操作系统,允许多个程序同时在系统中运行,只要打开任务管理器(Task Mananger) 就可以看到当前正在运行的程序, 这些处于运行状态的程序成为进程(process)
![Alt text](images/image-7.png)
# 进程资源
进程是分配资源的基本单位, 在Windows系统中,每个进程都拥有以下资源
1. 一个虚拟的地址空间,一般成为进程空间
2. 全局唯一的进程ID(Client ID), 简称PID
3. 一个可执行映像(image), 也就是进程的程序文件(可执行程序)在内存中的表示
4. 一个或多个线程
5. 一个位于内核空间名为EPROCESS(进程执行块）的数据结构，用以记录进程的关键信息，包括创建时间、映像文件名称
6. 一个位于内核空间中的对象句柄表，用于记录和索引该进程所创建或打开的内核对象，操作系统根据该表格把用户模式下的句柄翻译为只想内核对象的指针
7. 一个用于描述内存目录表起始位置的基地址，用于把虚拟地址转换成物理地址
8. 位于用户空间的进程环境快（PEB）
9. 一个访问令牌（access token),用于表示进程的用户、安全组以及优先级
# 进程空间
为了保证系统中每个进程的安全，Windows为不同的进程分配了独立的进程地址空间， 成为进程空间，是受操作系统保护的虚拟地址，指针指向的都是这个空间的虚拟地址， 无法指向另一个进程空间，这样就保护了一个进程的数据和代码不会轻易收到其他进程的侵害，一个进程内的错误也不会影响其他运行的进程

32位Windows系统的进程空间是￥GB，即地址0x00000000到0xFFFFFFFF
64位系统，早期64位Windows,进程空间是16TB，从Windows 7 64位开始，进程空间的总大小扩大位256TB

进程空间分为用户空间和内核空间
用户空间是给应用程序的模块使用的，内核空间是给操作系统内核使用的
所有应用程序都需要使用内核提供的服务，所以内核空间是统一的，只有一个，会映射到所有应用程序的进程空间中，从这个角度来讲， 用户空间是独立的，内核空间是共享的
因为内核空间是共享的，腰围系统中所有进程服务，所以不允许被个人进程任意访问和破坏，为了保护内核空间，操作系统会利用CPU的硬件保护机制，从特权级别的角度看，内核空间的特权级别高于用户空间

# EPROCESS

Windows 使用EPROCESSS来描述进程
包括进程ID， 创建时间，对象句柄表， 访问令牌，线程列表，进程环境快(PEB)